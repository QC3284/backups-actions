## å¦‚ä½•ä» GitHub å¤‡ä»½æ¢å¤ä»“åº“

ä»¥ä¸‹æ˜¯ä» GitHub å¤‡ä»½æ¢å¤ä»“åº“çš„å®Œæ•´æŒ‡å—ã€‚å¤‡ä»½æ–‡ä»¶é€šå¸¸æ˜¯ `.tar.zst` æ ¼å¼çš„å‹ç¼©åŒ…ï¼ŒåŒ…å«å®Œæ•´çš„ Git è£¸ä»“åº“ï¼ˆbare repositoryï¼‰ã€‚

### å‰ææ¡ä»¶
1. å·²å®‰è£… Git
2. å·²å®‰è£… Zstandard (`zstd`) å‹ç¼©å·¥å…·
3. æ‹¥æœ‰å¤‡ä»½æ–‡ä»¶ï¼ˆä» GitHub Releases ä¸‹è½½ï¼‰

---

### æ¢å¤æ­¥éª¤

#### 1. ä¸‹è½½å¤‡ä»½æ–‡ä»¶
ä» GitHub Releases ä¸‹è½½å¤‡ä»½çš„å‹ç¼©æ–‡ä»¶ï¼ˆé€šå¸¸å‘½åä¸º `owner-repo-timestamp.tar.zst`ï¼‰

```bash
# ç¤ºä¾‹ï¼šä¸‹è½½å¤‡ä»½æ–‡ä»¶
gh release download --pattern "*.tar.zst"
```

#### 2. è§£å‹ç¼©å¤‡ä»½æ–‡ä»¶

```bash
# åˆ›å»ºæ¢å¤ç›®å½•
mkdir restore && cd restore

# è§£å‹ç¼© .tar.zst æ–‡ä»¶
zstd -d < ../owner-repo-timestamp.tar.zst | tar xf -
```

#### 3. ä»è£¸ä»“åº“å…‹éš†åˆ°å·¥ä½œç›®å½•

```bash
# å…‹éš†è£¸ä»“åº“åˆ°æ–°çš„å·¥ä½œç›®å½•
git clone owner-repo.git workdir
cd workdir
```

#### 4. éªŒè¯ä»“åº“å†…å®¹
æ£€æŸ¥ä»“åº“å†å²è®°å½•å’Œæ–‡ä»¶æ˜¯å¦å®Œæ•´ï¼š

```bash
# æŸ¥çœ‹æäº¤å†å²
git log --oneline

# æ£€æŸ¥æ–‡ä»¶çŠ¶æ€
git status

# æŸ¥çœ‹åˆ†æ”¯
git branch -a
```

#### 5. æ¨é€åˆ°æ–°çš„ GitHub ä»“åº“
åœ¨ GitHub åˆ›å»ºæ–°ä»“åº“åæ¨é€ï¼š

```bash
# æ·»åŠ æ–°è¿œç¨‹ä»“åº“
git remote add origin https://github.com/your-username/new-repo.git

# æ¨é€æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾
git push origin --all
git push origin --tags
```

#### 6. æ¢å¤åŸå§‹çŠ¶æ€ï¼ˆå¯é€‰ï¼‰
å¦‚æœéœ€è¦æ¢å¤åŸå§‹ä»“åº“ï¼ˆè€Œéåˆ›å»ºæ–°ä»“åº“ï¼‰ï¼š

```bash
# å¼ºåˆ¶æ¨é€åˆ°åŸå§‹ä»“åº“ï¼ˆè°¨æ…ä½¿ç”¨ï¼ï¼‰
git push --force origin --all
git push --force origin --tags
```

> âš ï¸ è­¦å‘Šï¼šè¿™ä¼šè¦†ç›–è¿œç¨‹ä»“åº“çš„å†å²è®°å½•ï¼Œä»…åœ¨ä½ ç¡®å®šè¦è¦†ç›–æ—¶ä½¿ç”¨

---

### å®Œæ•´æ¢å¤è„šæœ¬

```bash
#!/bin/bash

# è¾“å…¥å‚æ•°
BACKUP_FILE="owner-repo-1750786800.tar.zst"
NEW_REPO_URL="https://github.com/your-username/new-repo.git"

# æ­¥éª¤ 1: è§£å‹å¤‡ä»½
echo "è§£å‹å¤‡ä»½æ–‡ä»¶..."
mkdir restore && cd restore
zstd -d -c ../$BACKUP_FILE | tar xf -

# æ­¥éª¤ 2: è·å–ä»“åº“åç§°
REPO_DIR=$(find . -maxdepth 1 -type d -name "*.git" | head -n1)
REPO_NAME=$(basename $REPO_DIR .git)

# æ­¥éª¤ 3: å…‹éš†åˆ°å·¥ä½œç›®å½•
echo "å…‹éš†ä»“åº“..."
git clone $REPO_DIR $REPO_NAME-workdir
cd $REPO_NAME-workdir

# æ­¥éª¤ 4: è®¾ç½®æ–°è¿œç¨‹
echo "è®¾ç½®æ–°è¿œç¨‹ä»“åº“..."
git remote add new-origin $NEW_REPO_URL

# æ­¥éª¤ 5: æ¨é€æ‰€æœ‰å†…å®¹
echo "æ¨é€ä»“åº“..."
git push new-origin --all
git push new-origin --tags

echo "æ¢å¤å®Œæˆï¼è®¿é—®ä»“åº“: $NEW_REPO_URL"
```

---

### å¸¸è§é—®é¢˜è§£å†³

#### é—®é¢˜ 1ï¼šå‹ç¼©æ–‡ä»¶æŸå
```bash
# å°è¯•ä¿®å¤å‹ç¼©æ–‡ä»¶
zstd --fix ../backup-file.tar.zst -o fixed-backup.tar.zst
```

#### é—®é¢˜ 2ï¼šç¼ºå°‘ zstd å·¥å…·
```bash
# Linux (Debian/Ubuntu)
sudo apt install zstd

# macOS (Homebrew)
brew install zstd

# Windows (Scoop)
scoop install zstd
```

#### é—®é¢˜ 3ï¼šæ¢å¤ç‰¹å®šåˆ†æ”¯
```bash
# åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯
git branch -a

# æ¢å¤ç‰¹å®šåˆ†æ”¯
git checkout -b feature-branch origin/feature-branch
```

#### é—®é¢˜ 4ï¼šæ¢å¤ç‰¹å®šæ—¶é—´ç‚¹
```bash
# æŸ¥æ‰¾æäº¤ID
git log --oneline

# é‡ç½®åˆ°ç‰¹å®šæäº¤
git reset --hard <commit-id>
```

---

### æ¢å¤æµç¨‹å›¾

```mermaid
graph TD
    A[ä¸‹è½½å¤‡ä»½æ–‡ä»¶] --> B[è§£å‹ç¼© .tar.zst]
    B --> C[å…‹éš†è£¸ä»“åº“]
    C --> D[éªŒè¯ä»“åº“å†…å®¹]
    D --> E{æ¢å¤æ–¹å¼}
    E -->|åˆ›å»ºæ–°ä»“åº“| F[æ¨é€åˆ°æ–°ä»“åº“]
    E -->|è¦†ç›–åŸä»“åº“| G[å¼ºåˆ¶æ¨é€åˆ°åŸä»“åº“]
    F --> H[å®Œæˆ]
    G --> H
```

### æœ€ä½³å®è·µ
1. **å®šæœŸæµ‹è¯•æ¢å¤**ï¼šæ¯å­£åº¦æµ‹è¯•å¤‡ä»½æ¢å¤æµç¨‹
2. **ç‰ˆæœ¬ä¿ç•™**ï¼šä¿ç•™è‡³å°‘ 3 ä¸ªå†å²å¤‡ä»½ç‰ˆæœ¬
3. **å¼‚åœ°å­˜å‚¨**ï¼šå°†å¤‡ä»½å­˜å‚¨åœ¨ä¸åŒåœ°ç†ä½ç½®
4. **åŠ å¯†æ•æ„Ÿæ•°æ®**ï¼šå¯¹åŒ…å«æ•æ„Ÿä¿¡æ¯çš„ä»“åº“ä½¿ç”¨åŠ å¯†å¤‡ä»½
5. **æ–‡æ¡£è®°å½•**ï¼šç»´æŠ¤æ¢å¤æµç¨‹æ–‡æ¡£

> ğŸ’¡ æç¤ºï¼šä½¿ç”¨ `git fsck` å‘½ä»¤éªŒè¯ä»“åº“å®Œæ•´æ€§ï¼Œç¡®ä¿æ‰€æœ‰å¯¹è±¡éƒ½æœ‰æ•ˆ

é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨å¯ä»¥å¯é åœ°ä» GitHub å¤‡ä»½ä¸­æ¢å¤ä»»ä½•ä»“åº“ã€‚æ•´ä¸ªè¿‡ç¨‹ä¿ç•™äº†å®Œæ•´çš„æäº¤å†å²ã€åˆ†æ”¯å’Œæ ‡ç­¾ä¿¡æ¯ï¼Œç¡®ä¿ä»“åº“æ¢å¤åˆ°å¤‡ä»½æ—¶çš„å®Œæ•´çŠ¶æ€ã€‚
