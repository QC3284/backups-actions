# GitHub Repository Backup and Release

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨GitHub Actionsè‡ªåŠ¨å¤‡ä»½GitHubä»“åº“çš„é¡¹ç›®ã€‚å®ƒä¼šå°†æŒ‡å®šçš„ä»“åº“åˆ—è¡¨å…‹éš†å¹¶å‹ç¼©åï¼Œä»¥GitHub Releaseçš„å½¢å¼å­˜å‚¨ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ•’ **å®šæ—¶è‡ªåŠ¨å¤‡ä»½**ï¼šæ¯å¤©UTCæ—¶é—´å‡Œæ™¨4ç‚¹è‡ªåŠ¨è¿è¡Œ
- ğŸš€ **æ‰‹åŠ¨è§¦å‘å¤‡ä»½**ï¼šéšæ—¶é€šè¿‡Workflow Dispatchè§¦å‘
- ğŸ“¦ **é«˜æ•ˆå‹ç¼©**ï¼šä½¿ç”¨Zstandard(ZSTD)ç®—æ³•è¿›è¡Œé«˜å‹ç¼©æ¯”å¤‡ä»½
- ğŸ”’ **å®‰å…¨å­˜å‚¨**ï¼šå¤‡ä»½å­˜å‚¨åœ¨GitHub Releasesä¸­
- ğŸ“Š **è¯¦ç»†æŠ¥å‘Š**ï¼šç”Ÿæˆå¤‡ä»½æˆåŠŸ/å¤±è´¥æŠ¥å‘Š
- âœ‚ï¸ **å¤§ä»“åº“æ”¯æŒ**ï¼šè‡ªåŠ¨åˆ†å·å¤„ç†è¶…è¿‡1.8GBçš„ä»“åº“
- ğŸ’¾ **ç©ºé—´ä¼˜åŒ–**ï¼šæ™ºèƒ½ç£ç›˜ç©ºé—´ç®¡ç†

## ä½¿ç”¨æŒ‡å—

### å‡†å¤‡å·¥ä½œ

1. **Fork æ­¤ä»“åº“**
2. **é…ç½®ä»“åº“ Secrets**
   - é»˜è®¤ä½¿ç”¨`secrets.GITHUB_TOKEN`ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼ˆæœ‰å†™å…¥ä»“åº“çš„æƒé™ï¼‰
3. **ç¼–è¾‘å¤‡ä»½åˆ—è¡¨**
   - åœ¨ä»“åº“æ ¹ç›®å½•åˆ›å»ºæ–‡ä»¶ `back_ck_url.txt`
   - æ¯è¡Œä¸€ä¸ªä»“åº“URLï¼ˆæ”¯æŒHTTPSæˆ–SSHæ ¼å¼ï¼‰ï¼Œä¾‹å¦‚ï¼š
     ```
     https://github.com/username/repo1.git
     git@github.com:username/repo2.git
     # æ³¨é‡Šè¡Œä»¥#å¼€å¤´
     ```

### è¿è¡Œå¤‡ä»½

- **æ‰‹åŠ¨è¿è¡Œ**ï¼šåœ¨ä»“åº“çš„Actionsæ ‡ç­¾é¡µä¸­ï¼Œé€‰æ‹©"Repository Backup and Release"å·¥ä½œæµï¼Œç‚¹å‡»"Run workflow"
- **å®šæ—¶è¿è¡Œ**ï¼šå·¥ä½œæµä¼šåœ¨æ¯å¤©UTCæ—¶é—´4ç‚¹è‡ªåŠ¨è¿è¡Œ

### æŸ¥çœ‹å¤‡ä»½ç»“æœ

1. **è®¿é—®Releasesé¡µé¢**ï¼š
   - å‰å¾€ä»“åº“çš„ **Releases** é¡µé¢ï¼ˆé€šå¸¸åœ¨ä»“åº“é¦–é¡µçš„å³ä¾§èœå•ï¼‰
   - æŸ¥æ‰¾ä»¥ `backup-` å¼€å¤´å¹¶å¸¦æœ‰æ—¶é—´æˆ³çš„æ ‡ç­¾ï¼ˆä¾‹å¦‚ï¼š`backup-20250101000000`ï¼‰

2. **é˜…è¯»å¤‡ä»½æŠ¥å‘Š**ï¼š
   - æ¯ä¸ªå‘å¸ƒç‰ˆæœ¬çš„è¯´æ˜ä¸­åŒ…å«ä¸€ä»½ **å¤‡ä»½æ‘˜è¦æŠ¥å‘Š**
   - æŠ¥å‘Šåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š
     - **âœ… æˆåŠŸå¤‡ä»½**ï¼šåˆ—å‡ºæ‰€æœ‰æˆåŠŸå¤‡ä»½çš„ä»“åº“
     - **âŒ å¤‡ä»½å¤±è´¥**ï¼šåˆ—å‡ºå¤‡ä»½è¿‡ç¨‹ä¸­å¤±è´¥çš„ä»“åº“åŠåŸå› ï¼ˆå¦‚æœæœ‰ï¼‰

3. **ä¸‹è½½å¤‡ä»½æ–‡ä»¶**ï¼š
   - åœ¨å‘å¸ƒç‰ˆæœ¬çš„ **Assets** éƒ¨åˆ†ï¼Œå¯ä»¥ä¸‹è½½æ‰€æœ‰å¤‡ä»½çš„å‹ç¼©æ–‡ä»¶
   - å¤‡ä»½æ–‡ä»¶å‘½åæ ¼å¼ï¼š`{ä»“åº“æ‰€æœ‰è€…}-{ä»“åº“å}-{æ—¶é—´æˆ³}.tar.zst`
   - **æ³¨æ„**ï¼šå¯¹äºå¤§å‹ä»“åº“ï¼Œå¤‡ä»½æ–‡ä»¶ä¼šè¢«åˆ†å‰²ä¸ºå¤šä¸ªåˆ†å·æ–‡ä»¶ï¼ˆæ¯ä¸ªä¸è¶…è¿‡1.8GBï¼‰ï¼Œå‘½åæ ¼å¼ä¸ºï¼š`{åŸæ–‡ä»¶å}.part000`ã€`{åŸæ–‡ä»¶å}.part001` ç­‰

4. **å¤„ç†åˆ†å·æ–‡ä»¶**ï¼š
   - å¦‚æœä»“åº“å¤‡ä»½è¢«åˆ†å‰²æˆå¤šä¸ªåˆ†å·æ–‡ä»¶ï¼Œä½ éœ€è¦ä¸‹è½½ **æ‰€æœ‰** å±äºåŒä¸€ä¸ªä»“åº“çš„åˆ†å·æ–‡ä»¶
   - ä½¿ç”¨å‘½ä»¤è¡Œåˆå¹¶åˆ†å·æ–‡ä»¶ï¼š
     ```bash
     cat {æ–‡ä»¶å}.part* > {å®Œæ•´æ–‡ä»¶å}.tar.zst
     ```
     ä¾‹å¦‚ï¼š
     ```bash
     cat octocat-hello-world-1672531200.tar.zst.part* > octocat-hello-world-1672531200.tar.zst
     ```

### æ¢å¤å¤‡ä»½

1. ä¸‹è½½å¤‡ä»½æ–‡ä»¶ï¼ˆå¦‚æœåˆ†å·ï¼Œéœ€è¦ä¸‹è½½æ‰€æœ‰åˆ†å·ï¼‰
2. åˆå¹¶åˆ†å·æ–‡ä»¶ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š
   ```bash
   cat filename.tar.zst.part* > filename.tar.zst
   ```
3. è§£å‹å¤‡ä»½æ–‡ä»¶ï¼š
   ```bash
   zstd -d filename.tar.zst
   tar xvf filename.tar
   ```
4. æ¢å¤Gitä»“åº“ï¼š
   ```bash
   cd repo.git
   git init --bare
   ```

## æŠ€æœ¯ç»†èŠ‚

### å¤‡ä»½æµç¨‹

1. åˆ›å»ºæ–°çš„Releaseè‰ç¨¿
2. é€ä¸ªå…‹éš†ä»“åº“
3. ä½¿ç”¨ZSTDå‹ç¼©ä»“åº“å†…å®¹
4. å¤§æ–‡ä»¶è‡ªåŠ¨åˆ†å·å¤„ç†ï¼ˆ>1.8GBï¼‰
5. ä¸Šä¼ å¤‡ä»½æ–‡ä»¶åˆ°Release
6. ç”Ÿæˆå¤‡ä»½æŠ¥å‘Šå¹¶å‘å¸ƒRelease

### åˆ†å·å¤„ç†

å½“å¤‡ä»½æ–‡ä»¶è¶…è¿‡1.8GBæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†å‰²æ–‡ä»¶ä¸ºå¤šä¸ªåˆ†å·ï¼š
- åˆ†å·å¤§å°ï¼š1.8GBï¼ˆ1800MBï¼‰
- å‘½åæ ¼å¼ï¼š`åŸæ–‡ä»¶å.part000`, `åŸæ–‡ä»¶å.part001`ç­‰
- åˆå¹¶å‘½ä»¤ï¼š`cat filename.part* > fullfile.zst`

## è®¸å¯åè®®

æœ¬é¡¹ç›®é‡‡ç”¨ **GNU General Public License v3.0** æˆæƒã€‚

```
Copyright (C) 2023 [ä½ çš„åå­—/ç»„ç»‡å]

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
```

å®Œæ•´çš„è®¸å¯åè®®è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è´¡çŒ®æŒ‡å—

æ¬¢è¿é€šè¿‡Issueæˆ–Pull Requestè´¡çŒ®ä»£ç ï¼è¯·ç¡®ä¿ï¼š
- éµå¾ªç°æœ‰ä»£ç é£æ ¼
- åŒ…å«å¿…è¦çš„æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

---

**æ¸©é¦¨æç¤º**ï¼š
- å¤‡ä»½å®Œæˆåï¼Œæ‚¨ä¼šæ”¶åˆ°GitHubçš„é€šçŸ¥é‚®ä»¶ï¼ˆå¯åœ¨è´¦æˆ·è®¾ç½®ä¸­é…ç½®ï¼‰
- å®šæœŸæ£€æŸ¥å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§ï¼Œå»ºè®®æ¯å­£åº¦è¿›è¡Œä¸€æ¬¡æ¢å¤æµ‹è¯•
- å¤§å‹ä»“åº“ï¼ˆ>1GBï¼‰å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´å¤„ç†ï¼Œè¯·è€å¿ƒç­‰å¾…
